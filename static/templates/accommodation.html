{% extends "base.html" %}
{% block content %} 
<div class="pageheader">
    <div class="pageicon"><span class="iconfa-pencil"></span></div>
        <div class="pagetitle"><h1>Tracking Reports</h1></div>
</div>

<div class="maincontent">
        <div class="maincontentinner">
            <div class="row">
            <div class="col-md-12">
               <div class="panel">
                 <div class="panel-heading">
                       
                          <span class="tools pull-right">
                            <a class="fa fa-chevron-down" href="javascript:;"></a>
                            <a class="fa fa-cog" href="javascript:;"></a>
                            <a class="fa fa-times" href="javascript:;"></a>
                         </span>     
                    </div>
                <div class="panel-body" >
                    <div class="span9">
                        <form method = "POST" action="accommodationreport" class="stdform">{% csrf_token %}
                    <!-- {{ form.as_p }} -->
                      <div class="form-control span6 text-center" style="float:left;margin-left:-185px">
        <!-- From : <input type="date" name="from" /> -->
                    <input size="16" type="text" name="empid" id="empid" required placeholder="Employee Id.." />
                    </div>
                    <div class="form-group " style="float: left;margin-top: 0px;margin-right:-137px;">
                    <input size="16" type="text" name="fromdate" id="calendar" required placeholder="From Date.."/>
                   </div>
                   <div class="form-group" style="float: right;margin-top: 0px;margin-right: -107px;" >
                     <input size="16" type="text" name="todate" id="calendar2" required placeholder="To Date.."/>
                    </div>
                     <div class="clearfix"></div>
        
                     <div class="row">
                    <div class="form-group text-center">
                       
                <button type="submit" class="btn btn-primary" style="margin-left:100px;">Submit</button>      
          </div></div>
                    </form>
                </div>
                </div><!--panel body-->
                </div><!--panel-->

      </div><!--.col-->
      </div><!--row-->
       <div class="clearfix"></div>
        
       <div class="row">
            <div class="col-md-12">
              <div class="text-right">
             <button type="button" class="btn btn-info" onclick="Export('excel')">Export to Excel</button><br></br>
             <button type="button" class="btn btn-info" onclick="Export('pdf')">  Export to Pdf  </button> 
           </div>
           <!-- <input type="hidden" value="{{employeeid}}" id="employeeid"/> -->
            <input type="hidden" value="{{frmdate}}" id="frmdate"/>
            <input type="hidden" value="{{tdate}}" id="tdate"/>
               
                <div class="table-responsive" style="padding-left: 20px;">
                  <h4>Current Status Of Employee : {{latest}}{{latest1}}</h4>
            
              <table class="table table-bordered table-striped" id="active-members">
                <thead>
                  <tr>
                   <th>Emp Id<i class="fa fa-sort"></i></th>
                    <!-- <th>Emp Name<i class="fa fa-sort"></i></th> -->
                    <th>Building<i class="fa fa-sort"></i></th> 
                    <!-- <th>Status<i class="fa fa-sort"></i></th>  --> 
                    <th>Date&Time<i class="fa fa-sort"></i></th>   
                    <!-- <th>RfidcardNo<i class="fa fa-sort"></i></th> -->                   
                  </tr>
                </thead>
                <tbody>
                    {% for r in lists %}
                    <tr>
                    <td align="left">{{ r.empid }}</td> 
                    <!-- <td align="left">{{ r.qpscsmas_employee_details.first_name}}</td>  -->
                    <td align="left">{{ r.device_location }}</td>
                    <td align="left">{{r.date_time}}</td>
                   <!--  <td align="left">{{ r.rfidcardno}}</td> --> 
                    </tr>
                    {% endfor %}            
                </tbody>
              </table>
             
              
            </div>                
            </div><!--.col-->
      </div><!--row-->
        </div>
    </div>

         
<script src="../static/js/lib/jquery.js"></script>
<script src="../static/assets/jquery-ui/jquery-ui-1.10.1.custom.min.js"></script>
<script src="../static/js/accordion-menu/jquery.dcjqaccordion.2.7.js"></script>
<script src="../static/js/scrollTo/jquery.scrollTo.min.js"></script>
<script src="../static/js/nicescroll/jquery.nicescroll.js" type="text/javascript"></script>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot-chart/excanvas.min.js"></script><![endif]-->
<script src="../static/assets/jQuery-slimScroll-1.3.0/jquery.slimscroll.js"></script>
<script src="../static/assets/skycons/skycons.js"></script>
<script src="../static/assets/jquery.scrollTo/jquery.scrollTo.js"></script>
<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
 --><script src="../static/assets/calendar/clndr.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
<script src="../static/assets/calendar/moment-2.2.1.js"></script>
<!-- <script src="../static/js/calendar/evnt.calendar.init.js"></script> -->
<script src="../static/assets/jvector-map/jquery-jvectormap-1.2.2.min.js"></script>
<script src="../static/assets/jvector-map/jquery-jvectormap-us-lcc-en.js"></script>
<script src="../static/assets/gauge/gauge.js"></script>
<!--clock init-->
<script src="../static/assets/css3clock/js/script.js"></script>
<!--Easy Pie Chart-->
<script src="../static/assets/easypiechart/jquery.easypiechart.js"></script>
<!--Sparkline Chart-->
<script src="../static/assets/sparkline/jquery.sparkline.js"></script>
<!--Morris Chart-->
<script src="../static/assets/morris-chart/morris.js"></script>
<script src="../static/assets/morris-chart/raphael-min.js"></script>
<!--jQuery Flot Chart-->
<script src="../static/assets/flot-chart/jquery.flot.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.tooltip.min.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.resize.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.pie.resize.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.animator.min.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.growraf.js"></script>
<script src="../static/js/dashboard.js"></script>
<script src="../static/js/custom-select/jquery.customSelect.min.js" ></script>
<!--common script init for all pages-->
<script src="../static/js/scripts.js"></script>

<!--script for this page-->
<!--Core js-->
<script src="../static/js/lib/jquery.js"></script>
<script src="../static/js/lib/jquery-1.8.3.min.js"></script>
<script src="../static/bs3/js/bootstrap.min.js"></script>
<script src="../static/js/lib/jquery-ui-1.9.2.custom.min.js"></script>
<script class="include" type="text/javascript" src="../static/js/accordion-menu/jquery.dcjqaccordion.2.7.js"></script>
<script src="../static/js/scrollTo/jquery.scrollTo.min.js"></script>
<script src="../static/assets/easypiechart/jquery.easypiechart.js"></script>
<script src="../static/js/nicescroll/jquery.nicescroll.js" type="text/javascript"></script>

<script src="../static/assets/bootstrap-switch-master/build/js/bootstrap-switch.js"></script>

<script type="text/javascript" src="../static/assets/fuelux/js/spinner.min.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-fileupload/bootstrap-fileupload.js"></script>
<!-- <script type="text/javascript" src="../static/assets/bootstrap-wysihtml5/wysihtml5-0.3.0.js"></script> -->
<script type="text/javascript" src="../static/assets/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="../static/assets/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<script type="text/javascript" src="../static/assets/jquery-multi-select/js/jquery.multi-select.js"></script>
<script type="text/javascript" src="../static/assets/jquery-multi-select/js/jquery.quicksearch.js"></script>

<script type="text/javascript" src="../static/assets/bootstrap-inputmask/bootstrap-inputmask.min.js"></script>

<script src="../static/assets/jquery-tags-input/jquery.tagsinput.js"></script>

<!--common script init for all pages-->
<script src="../static/js/scripts.js"></script>

<script src="../static/js/toggle-button/toggle-init.js"></script>

<script src="../static/js/advanced-form/advanced-form.js"></script>
<!--Easy Pie Chart-->
<script src="../static/assets/easypiechart/jquery.easypiechart.js"></script>
<!--Sparkline Chart-->
<script src="../static/assets/sparkline/jquery.sparkline.js"></script>
<!--jQuery Flot Chart-->
<script src="../static/assets/flot-chart/jquery.flot.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.tooltip.min.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.resize.js"></script>
<script src="../static/assets/flot-chart/jquery.flot.pie.resize.js"></script>
<script src="{{STATIC_URL}}js/scripts.js"></script>
<script src="{{STATIC_URL}}js/jquery.min.js"></script>
<script src="{{STATIC_URL}}js/datatables/jquery.dataTables.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}js/datatables/dataTables.bootstrap.js" type="text/javascript"></script>

<script>
function popitup(url) {
    newwindow=window.open(url,'{{title}}','height=500,width=700');
    if (window.focus) {newwindow.focus()}
    return false;
}

</script>

 <script>
           $(function() {
        
              $("#active-members").dataTable({
        "lengthMenu": [[3,5,7,10, 25, 50, -1], [3,5,7,10, 25, 50, "All"]]
    });
    
    //           $("#pending-members").dataTable({
    //     "lengthMenu": [[3,5,7,10, 25, 50, -1], [3,5,7,10, 25, 50, "All"]]
    // });
    
    //           $("#suspend-members").dataTable({
    //     "lengthMenu": [[3,5,7,10, 25, 50, -1], [3,5,7,10, 25, 50, "All"]]
    // });
    
    //           $("#cancel-members").dataTable({
    //     "lengthMenu": [[3,5,7,10, 25, 50, -1], [3,5,7,10, 25, 50, "All"]]
    // });
    //  $("#other-members").dataTable({
    //     "lengthMenu": [[3,5,7,10, 25, 50, -1], [3,5,7,10, 25, 50, "All"]]
    // });
               
        });
       </script>
<script>
$(function(){
    $('#search_members').keyup(function(){

$.ajax({

    type: 'POST',
    url: '/search/',//this is the default though, you don't actually need to always mention it
    data: {
        'search_text' : $('#search_members').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',

    },
    success: searchSuccess,
    dataType: 'html'
    
});
});
});

function searchSuccess(data,textStatus,jqXHR)
{
    $('#search-results').html(data);
}

function Export(typ)
{

    var input = document.getElementById('frmdate'),
    fdate = input.value;
    var date1 = document.getElementById('tdate'),
    tdate = date1.value;

    var url = '/newmemberreport/?d1='+fdate+'&d2='+tdate+'&type='+typ;
    // alert(url);

    window.location.href=url;
}
</script>

{% endblock %}